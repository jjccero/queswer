<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.gzu.queswer.dao.QuestionDao">
    <select id="selectQuestionByQid" resultType="com.gzu.queswer.model.Question">
        SELECT q_id,title,detail,u_id,gmt_create,gmt_modify,anonymous
        FROM t_question
        WHERE q_id = #{qId};
    </select>
    <insert id="insertQuestion" useGeneratedKeys="true" keyProperty="qId">
        INSERT INTO t_question (gmt_create, title, detail, u_id, anonymous)
        VALUES (#{gmtCreate}, #{title}, #{detail}, #{uId}, #{anonymous});
    </insert>
    <select id="selectFollowCount" resultType="Integer">
        SELECT COUNT(*)
        FROM t_follow
        WHERE q_id = #{qId};
    </select>
    <insert id="insertFollow">
        INSERT INTO t_follow (q_id, u_id)
        VALUES (#{qId}, #{uId})
    </insert>
    <delete id="deleteFollow">
        DELETE
        FROM t_follow
        WHERE q_id = #{qId}
          AND u_id = #{uId};
    </delete>
    <select id="selectFollowsByUid" resultType="Long">
        SELECT q_id
        FROM t_follow
        WHERE u_id = #{uId};
    </select>
    <select id="selectAidByUid" resultType="Long">
        SELECT a_id
        FROM t_answer
        WHERE q_id = #{qId}
          AND u_id = #{uId};
    </select>
</mapper>